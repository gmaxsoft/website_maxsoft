---
export const prerender = true;

import Layout from '../../layouts/Layout.astro';
import Content from "../../components/Content.astro";
import pl from '../../i18n/pl.json';
import en from '../../i18n/en.json';

// Mapa tłumaczeń
const translations = { pl, en };

// Eksport funkcji getStaticPaths dla dynamicznego routingu
export async function getStaticPaths() {
  return [
    { params: { lang: 'pl' } },
    { params: { lang: 'en' } }
  ];
}

// Pobierz parametr lang z Astro.params
const { lang } = Astro.params as { lang: "pl" | "en" };
const langPrefix = `/${lang}`;

// 1. POBRANIE DANYCH
const pageData = translations[lang]?.index || translations.pl.index;
const contentFooter = translations[lang].footer;
const contentMenu = translations[lang].menu;
---

<Layout 
    title={pageData.title}
    description={pageData.description}
    ogImage={pageData.ogimage}
    currentLocale={lang}
    contentMenu={contentMenu}
    contentFooter={contentFooter}
>
    <Content data={pageData} langPrefix={langPrefix} />
</Layout>